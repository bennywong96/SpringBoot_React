<!DOCTYPE html>
<html>
<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" integrity="sha384-WskhaSGFgHYWDcbwN70/dfYBj47jz9qbsMId/iRN3ewGhXQFZCSftd1LZCfmhktB" crossorigin="anonymous" />
    <!--<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.3/toastr.min.css">-->
    <title>Spring Boot + React</title>
</head>
<body>
<div id='root'>
    </div>
    <script src="https://fb.me/react-15.0.1.js"></script>
    <script src="https://fb.me/react-dom-15.0.1.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/2.1.3/toastr.min.js"></script>
<!--<script type="text/babel" src="JS/app.js">-->

    <!--</script>-->

<script type="text/babel">

    var Employee = React.createClass({
        getInitialState: function() {
            return {display: true };
        },
        handleDelete() {
            var self = this;
            $.ajax({
                url: self.props.employee._links.self.href,
                type: 'DELETE',
                success: function(result) {
                    self.setState({display: false});
                },
                error: function(xhr, ajaxOptions, thrownError) {
                    toastr.error(xhr.responseJSON.message);
                }
            });
        },
        render: function() {
            if (this.state.display==false) return null;
            else return (
                    <tr>
                        <td>{this.props.employee.firstName}</td>
                        <td>{this.props.employee.surname}</td>
                        <td>{this.props.employee.accountNumber}</td>
                        <td>
                            <button className="btn btn-info" onClick={this.handleDelete}>Delete</button>
                        </td>
                    </tr>
            );
        }
    });

    var EmployeeTable = React.createClass({
        render: function() {
            const rows = [];
            this.props.employees.forEach(function(employee) {
                rows.push(<Employee employee={employee} />);
            });
            return (
                    <div className="container">
                        <table className="table table-striped">
                            <thead>
                            <tr>
                                <th>First Name</th>
                                <th>Surname</th>
                                <th>Account Number</th>
                                <th>Delete</th>
                            </tr>
                            </thead>
                            <tbody>{rows}</tbody>
                        </table>
                    </div>);
        }
    });


     var EMPLOYEES = [
         {firstName: 'Joe', surname: 'Biden', accountNumber: 5},
         {firstName: 'President', surname: 'Biden', accountNumber: 8},
         {firstName: 'Crystal', surname: 'Biden', accountNumber: 12},
         {firstName: 'James', surname: 'Biden', accountNumber: 2}
     ];


    ReactDOM.render( <EmployeeTable employees={EMPLOYEES}/>, document.getElementById('root') );
</script>
</body>
</html>